---
import BaseLayout from "../../layouts/BaseLayout.astro";
import MovieDetails from "../../components/MovieDetails.tsx"
const { env } = Astro.locals.runtime;
const { id } = Astro.params;

const TMDB_MOVIE_DETAILS_URL = `https://api.themoviedb.org/3/movie/${id}?language=en-US`
const TMDB_BEARER_TOKEN = env.TMDB_BEARER_TOKEN

const data = await fetch(TMDB_MOVIE_DETAILS_URL, { headers: { Authorization: `Bearer ${TMDB_BEARER_TOKEN}`, 'Content-Type': 'application/json'}}).then((response) => response.json()).catch((e) => console.error(e))
---

<BaseLayout>
    <MovieDetails movieData={data}/>
</BaseLayout>
